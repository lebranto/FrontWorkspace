<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>변수의 유효범위</h1>
    <input type="button" value="전역 | 지역" onclick="test1();">
    <input type="button" value="scope" onclick="test2();">
    <input type="button" value="개선" onclick="test3();">

    <script>
        var a; //전역 or 지역 => 전역 변수이다.
        a=100;

        // let a2; //es6에 등장한 변수
        // const a3 =1; //상수값 저장시 사용(es6에 등장). 전역변수.

        function test1(){
            var a = "아"; //지역
            console.log(a); //전역 변수와 지역변수가 있으면 지역변수가 우선권을 갖는다
            console.log(this.a); //100
            console.log(window.a); //100
            // this == window
            // 일반 함수에서 this는 window를 가리킨다.
            // 객체 안에 함수가 있으면 메서드, 그렇지 않으면 함수

            //var 변수의 단점
            var a = true;  // 변수 중복 선언 가능
            b=123; // var 없이 변수 선언 가능. 단 항상 전역변수(window)로 등록 
            console.log(window.b)
        }

        /*
            scope : 유효범위
            java의 변수 scope는 block scope
            javascript의 변수(var) scope는 function scope를 가지고 있다.
            javascript의 변수중 const, let은 자바와 동일한 block scope를 가지고 있음.

        */

        function test2(){
            var x = 10;
            if(true){
                // 함수 내부에 선언한 변수는 어떤 위치에서든 접근 가능
                var x2 = 10;
            }
            for(var i =0; i<10; i++){

            }
            console.log("i", i)


            console.log("x",x);
            console.log("x2", x2);
        }
            

    </script>

    <script>
        // console.log(a);
    </script>

    <h1>Hoisting</h1>
    <script>   

        //var b;  var 키워드 변수는 hoisting 된다.
        // function foo() 함수는 hoisting 된다. 
        // const, let은 안된다.

        console.log(b);  //undefined
        var b = "안녕";
        foo();

        // 함수도 hoisting 된다.
        // 함수 선언식
        function foo(){
            console.log("foo");
        }

        //함수 표현식(함수를 값으로서 쓰는 것)으로 생성한 함수는 호이스팅 되지 않는다.

        //bar(); 에러가 난다.
        
        var bar = function(){
            console.log('bar')
        };

        bar();

    </script>
    
</body>
</html>